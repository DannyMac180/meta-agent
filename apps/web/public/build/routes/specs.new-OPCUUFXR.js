import{a as D,b as E}from"/build/_shared/chunk-PW2XMSTX.js";import"/build/_shared/chunk-RRANPFQE.js";import{a as K}from"/build/_shared/chunk-KPWQHS6G.js";import{a as M,d as A,g as k,m as N,q as R}from"/build/_shared/chunk-2C25HZ32.js";import{d as l}from"/build/_shared/chunk-T36URGAI.js";var n=l(M(),1),I=l(K(),1);var t=l(R(),1),H={chatbot:{specVersion:"0.1.0",meta:{id:"01ARZ3NDEKTSV4RRFFQ69G5FAV",name:"chatbot-agent",description:"A conversational chatbot agent",version:"0.0.1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),tags:["chatbot","conversation"]},variables:[{key:"topic",type:"string",required:!0},{key:"tone",type:"enum",enumValues:["friendly","professional","casual"],required:!1}],prompt:{template:"You are a helpful chatbot. Discuss {{topic}} in a {{tone}} tone."},model:{provider:"openai",model:"gpt-4o-mini",maxTokens:1024,temperature:.7},tools:[],limits:{timeoutSec:60,budgetUsd:1}},"web-automation":{specVersion:"0.1.0",meta:{id:"01ARZ3NDEKTSV4RRFFQ69G5FAV",name:"web-automation-agent",description:"Agent for automating web tasks",version:"0.0.1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),tags:["automation","web"]},variables:[{key:"target_url",type:"string",required:!0},{key:"action",type:"enum",enumValues:["scrape","interact","monitor"],required:!0}],prompt:{template:"Perform {{action}} on {{target_url}}. Be careful and precise."},model:{provider:"openai",model:"gpt-4o",maxTokens:2048,temperature:.1},tools:[{kind:"http",allowDomains:["https://*"]}],limits:{timeoutSec:120,budgetUsd:2}},"api-copilot":{specVersion:"0.1.0",meta:{id:"01ARZ3NDEKTSV4RRFFQ69G5FAV",name:"api-copilot-agent",description:"AI assistant for API development and testing",version:"0.0.1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),tags:["api","development","testing"]},variables:[{key:"api_spec",type:"string",required:!0},{key:"task",type:"enum",enumValues:["generate","test","document"],required:!0}],prompt:{template:"Help with {{task}} for the API: {{api_spec}}. Provide clear, actionable guidance."},model:{provider:"openai",model:"gpt-4o",maxTokens:4096,temperature:.2},tools:[{kind:"http",allowDomains:["https://api.example.com"]}],limits:{timeoutSec:180,budgetUsd:3}}};function V(){let{initialSpec:i,templateName:m}=N(),F=k(),T=A(),[c,u]=(0,n.useState)(()=>i?JSON.stringify(i,null,2):"{}"),[s,C]=(0,n.useState)(),[r,g]=(0,n.useState)({name:i?.meta?.name||"untitled-spec",tags:i?.meta?.tags||[]}),[O,p]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!1),h=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=a=>{a.preventDefault(),S()};return window.addEventListener("editor-save",e),()=>window.removeEventListener("editor-save",e)},[c,r,s]);let L=e=>{u(e),p(!0)},x=e=>{C(e)},S=()=>{if(s&&s.length>0){alert("Cannot save spec with validation errors. Please fix them first.");return}let e=new FormData;e.append("intent","save"),e.append("name",r.name),e.append("spec",c),e.append("tags",JSON.stringify(r.tags)),F(e,{method:"post"})},P=()=>{h.current?.click()},j=e=>{let a=e.target.files?.[0];if(!a)return;if(a.size>200*1024){alert("File too large (>200KB)");return}v(!0);let o=new FileReader;o.onload=J=>{try{let d=J.target?.result;u(d),p(!0);try{let w=JSON.parse(d);w.meta?.name&&g(q=>({...q,name:w.meta.name}))}catch{}}catch{alert("Failed to read file")}finally{v(!1)}},o.readAsText(a)},U=()=>{let e=new Blob([c],{type:"application/json"}),a=URL.createObjectURL(e),o=document.createElement("a");o.href=a,o.download=`${r.name}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},y=!s||s.length===0,b=T.state==="submitting";return(0,t.jsxs)("div",{className:"spec-editor-page",children:[(0,t.jsxs)("header",{className:"spec-editor-header",children:[(0,t.jsxs)("div",{className:"spec-meta",children:[(0,t.jsx)("input",{type:"text",value:r.name,onChange:e=>{g(a=>({...a,name:e.target.value})),p(!0)},className:"spec-name-input",placeholder:"Spec name"}),m&&(0,t.jsxs)("span",{className:"template-badge",children:["Template: ",m]}),O&&(0,t.jsx)("span",{className:"dirty-indicator",children:"\u25CF"})]}),(0,t.jsxs)("div",{className:"spec-actions",children:[(0,t.jsx)("button",{onClick:P,disabled:f,children:f?"Importing...":"Import"}),(0,t.jsx)("button",{onClick:U,children:"Export"}),(0,t.jsx)("button",{onClick:S,disabled:!y||b,className:y?"save-button-valid":"save-button-invalid",children:b?"Saving...":"Save Draft"})]})]}),(0,t.jsxs)("div",{className:"spec-editor-content",children:[(0,t.jsx)("div",{className:"spec-editor-main",children:(0,t.jsx)(D,{value:c,onChange:L,onValidationChange:x})}),(0,t.jsx)("div",{className:"spec-editor-sidebar",children:(0,t.jsx)(E,{errors:s,onErrorClick:e=>{console.log("Focus error:",e)}})})]}),(0,t.jsx)("input",{ref:h,type:"file",accept:".json,.yaml,.yml",style:{display:"none"},onChange:j})]})}export{V as default};
